<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero to Hero</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 100%;
            padding: 10px;
            box-sizing: border-box;
            min-height: calc(100vh - 70px);
            padding-bottom: 70px;
        }
        .header {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #0088cc, #00c8ff);
            color: white;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .balance-container {
            display: flex;
            justify-content: space-around;
            background-color: white;
            padding: 15px 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .balance-item {
            text-align: center;
            flex: 1;
        }
        .balance-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .balance-value {
            font-weight: bold;
            font-size: 18px;
        }
        #energy { color: #f39c12; }
        #gamma { color: #3498db; }
        #ton { color: #9b59b6; }
        .content {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            min-height: 200px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        .nav-bar {
            display: flex;
            justify-content: space-around;
            background-color: white;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        .nav-button {
            text-align: center;
            padding: 5px;
            cursor: pointer;
            flex: 1;
            transition: all 0.3s;
        }
        .nav-button.active {
            color: #0088cc;
            transform: translateY(-5px);
        }
        .nav-button .icon {
            font-size: 24px;
            margin-bottom: 3px;
        }
        .nav-button .label {
            font-size: 12px;
        }
        .building {
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #fafafa;
            transition: all 0.3s;
        }
        .building:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .building-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .building-name {
            font-weight: bold;
            font-size: 18px;
        }
        .building-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 16px;
        }
        .building-income {
            color: #27ae60;
            margin-bottom: 12px;
            font-size: 14px;
        }
        .buy-btn {
            background: linear-gradient(135deg, #0088cc, #00c8ff);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            transition: all 0.3s;
        }
        .buy-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        .premium-badge {
            background-color: #f1c40f;
            color: #333;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 8px;
            font-weight: bold;
        }
        .city-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .city-cell {
            aspect-ratio: 1/1;
            background-color: #ecf0f1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2ecc71;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            animation: fadeInOut 2.5s;
            display: none;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; top: 10px; }
            10% { opacity: 1; top: 20px; }
            90% { opacity: 1; top: 20px; }
            100% { opacity: 0; top: 10px; }
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>
    
    <div class="container">
        <div class="header">
            <h1>Zero to Hero</h1>
            <p>–ù–∞—á–Ω–∏ —Å –Ω—É–ª—è –∏ –¥–æ—Å—Ç–∏–≥–Ω–∏ –≤–µ—Ä—à–∏–Ω!</p>
        </div>
        
        <div class="balance-container">
            <div class="balance-item">
                <div class="balance-icon">‚ö°</div>
                <div>–≠–Ω–µ—Ä–≥–∏—è</div>
                <div class="balance-value" id="energy">0</div>
            </div>
            <div class="balance-item">
                <div class="balance-icon">Œì</div>
                <div>Gamma Coin</div>
                <div class="balance-value" id="gamma">0</div>
            </div>
            <div class="balance-item">
                <div class="balance-icon">üíé</div>
                <div>TON</div>
                <div class="balance-value" id="ton">0</div>
            </div>
        </div>
        
        <div class="content" id="content">
            <h2 id="content-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <div id="content-text">
                –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –≤ –Ω–∏–∂–Ω–µ–º –º–µ–Ω—é –¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã.
            </div>
        </div>
    </div>
    
    <div class="nav-bar">
        <div class="nav-button" id="events-btn" onclick="showSection('events')">
            <div class="icon">üé≤</div>
            <div class="label">–ò–≤–µ–Ω—Ç—ã</div>
        </div>
        <div class="nav-button" id="shop-btn" onclick="showSection('shop')">
            <div class="icon">üõí</div>
            <div class="label">–ú–∞–≥–∞–∑–∏–Ω</div>
        </div>
        <div class="nav-button active" id="city-btn" onclick="showSection('city')">
            <div class="icon">üèôÔ∏è</div>
            <div class="label">–ì–æ—Ä–æ–¥</div>
        </div>
        <div class="nav-button" id="leaderboard-btn" onclick="showSection('leaderboard')">
            <div class="icon">üèÜ</div>
            <div class="label">–õ–∏–¥–µ—Ä—ã</div>
        </div>
        <div class="nav-button" id="exchange-btn" onclick="showSection('exchange')">
            <div class="icon">üí±</div>
            <div class="label">–û–±–º–µ–Ω</div>
        </div>
    </div>

    <script>
        // Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            balance: {
                energy: 0,
                gamma: 100,  // –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –¥–ª—è —Ç–µ—Å—Ç–∞
                ton: 0
            },
            buildings: {
                solar: 0,
                wind: 0,
                water: 0,
                nuclear: 0
            },
            lastUpdate: Date.now(),
            hasPremium: false
        };
        
        // –î–∞–Ω–Ω—ã–µ –æ –∑–¥–∞–Ω–∏—è—Ö
        const buildingsData = {
            solar: {
                name: "–°–æ–ª–Ω–µ—á–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è",
                price: 7,
                income: 700,
                emoji: "‚òÄÔ∏è",
                premium: false
            },
            wind: {
                name: "–í–µ—Ç—Ä—è–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è",
                price: 21,
                income: 2100,
                emoji: "üå¨Ô∏è",
                premium: false
            },
            water: {
                name: "–í–æ–¥–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è",
                price: 76,
                income: 5700,
                emoji: "üåä",
                premium: false
            },
            nuclear: {
                name: "–Ø–¥–µ—Ä–Ω—ã–π —Ä–µ–∞–∫—Ç–æ—Ä",
                price: 150,
                income: 15000,
                emoji: "‚ò¢Ô∏è",
                premium: true
            }
        };
        
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(text) {
            const notif = document.getElementById('notification');
            notif.textContent = text;
            notif.style.display = 'block';
            setTimeout(() => {
                notif.style.display = 'none';
            }, 2500);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function updateBalance() {
            document.getElementById('energy').textContent = Math.floor(gameState.balance.energy);
            document.getElementById('gamma').textContent = Math.floor(gameState.balance.gamma);
            document.getElementById('ton').textContent = Math.floor(gameState.balance.ton);
        }
        
        // –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞
        function calculateIncome() {
            const now = Date.now();
            const hoursPassed = (now - gameState.lastUpdate) / 1000 / 3600;
            
            let incomePerHour = 0;
            for (const [type, count] of Object.entries(gameState.buildings)) {
                if (buildingsData[type] && count > 0) {
                    incomePerHour += count * buildingsData[type].income;
                }
            }
            
            const earnedEnergy = incomePerHour * hoursPassed;
            gameState.balance.energy += earnedEnergy;
            gameState.lastUpdate = now;
            
            if (earnedEnergy > 0) {
                showNotification(`+${Math.floor(earnedEnergy)} ‚ö° (${Math.floor(incomePerHour)}/—á–∞—Å)`);
            }
            
            return earnedEnergy;
        }
        
        // –ü–æ–∫—É–ø–∫–∞ –∑–¥–∞–Ω–∏—è
        function buyBuilding(type) {
            const building = buildingsData[type];
            
            if (building.premium && !gameState.hasPremium) {
                showNotification("–¢—Ä–µ–±—É–µ—Ç—Å—è Premium —Å—Ç–∞—Ç—É—Å!");
                return;
            }
            
            if (gameState.balance.gamma >= building.price) {
                gameState.balance.gamma -= building.price;
                gameState.buildings[type] += 1;
                
                updateBalance();
                showSection('shop');
                showNotification(`–ö—É–ø–ª–µ–Ω–æ: ${building.name}`);
                
                // –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
                if (navigator.vibrate) navigator.vibrate(50);
            } else {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Gamma Coin!");
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function showShop() {
            calculateIncome();
            updateBalance();
            
            let shopHTML = '<h2>üõí –ú–∞–≥–∞–∑–∏–Ω –∑–¥–∞–Ω–∏–π</h2>';
            shopHTML += '<p>–ü–æ–∫—É–ø–∞–π—Ç–µ –∑–¥–∞–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏</p>';
            
            for (const [key, building] of Object.entries(buildingsData)) {
                const canAfford = gameState.balance.gamma >= building.price;
                const isPremiumLocked = building.premium && !gameState.hasPremium;
                
                shopHTML += `
                <div class="building">
                    <div class="building-header">
                        <span class="building-name">${building.emoji} ${building.name}
                            ${building.premium ? '<span class="premium-badge">PREMIUM</span>' : ''}
                        </span>
                        <span class="building-price">${building.price} Œì</span>
                    </div>
                    <div class="building-income">–î–æ—Ö–æ–¥: ${building.income} ‚ö°/—á–∞—Å</div>
                    <button class="buy-btn" 
                            onclick="buyBuilding('${key}')" 
                            ${!canAfford || isPremiumLocked ? 'disabled' : ''}>
                        –ö—É–ø–∏—Ç—å
                    </button>
                </div>
                `;
            }
            
            document.getElementById('content-title').textContent = '–ú–∞–≥–∞–∑–∏–Ω';
            document.getElementById('content-text').innerHTML = shopHTML;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
        function showCity() {
            calculateIncome();
            updateBalance();
            
            let cityHTML = '<h2>üèôÔ∏è –í–∞—à –≥–æ—Ä–æ–¥</h2>';
            cityHTML += '<p>–í–∞—à–∏ –∑–¥–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —ç–Ω–µ—Ä–≥–∏—é</p>';
            
            // –°–µ—Ç–∫–∞ –≥–æ—Ä–æ–¥–∞
            cityHTML += '<div class="city-grid">';
            for (let i = 0; i < 9; i++) {
                let cellContent = '';
                if (i < gameState.buildings.solar) cellContent = '‚òÄÔ∏è';
                else if (i < gameState.buildings.solar + gameState.buildings.wind) cellContent = 'üå¨Ô∏è';
                else if (i < gameState.buildings.solar + gameState.buildings.wind + gameState.buildings.water) cellContent = 'üåä';
                else if (i < gameState.buildings.solar + gameState.buildings.wind + gameState.buildings.water + gameState.buildings.nuclear) cellContent = '‚ò¢Ô∏è';
                
                cityHTML += `<div class="city-cell">${cellContent}</div>`;
            }
            cityHTML += '</div>';
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            let totalIncome = 0;
            let buildingsList = '';
            
            for (const [type, count] of Object.entries(gameState.buildings)) {
                if (count > 0 && buildingsData[type]) {
                    const building = buildingsData[type];
                    totalIncome += count * building.income;
                    buildingsList += `
                        <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                            <strong>${building.emoji} ${building.name}:</strong> ${count} —à—Ç.<br>
                            <small>–î–æ—Ö–æ–¥: ${count * building.income} ‚ö°/—á–∞—Å</small>
                        </div>
                    `;
                }
            }
            
            if (buildingsList === '') {
                buildingsList = '<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–¥–∞–Ω–∏–π. –ü–æ—Å–µ—Ç–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω!</p>';
            } else {
                buildingsList += `<p><strong>–û–±—â–∏–π –¥–æ—Ö–æ–¥:</strong> ${totalIncome} ‚ö°/—á–∞—Å</p>`;
            }
            
            cityHTML += buildingsList;
            document.getElementById('content-title').textContent = '–ì–æ—Ä–æ–¥';
            document.getElementById('content-text').innerHTML = cityHTML;
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞
        function showSection(section) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`${section}-btn`).classList.add('active');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
            switch(section) {
                case 'events':
                    document.getElementById('content-title').textContent = 'üé≤ –ò–≤–µ–Ω—Ç—ã';
                    document.getElementById('content-text').innerHTML = `
                        <h3>–¢–µ–∫—É—â–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                        <div style="background: #fff8e1; padding: 15px; border-radius: 10px; margin: 10px 0;">
                            <strong>–ù–æ–≤—ã—Ö –∏–≤–µ–Ω—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</strong>
                            <p>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –±–æ–Ω—É—Å—ã!</p>
                        </div>
                    `;
                    break;
                    
                case 'shop':
                    showShop();
                    break;
                    
                case 'city':
                    showCity();
                    break;
                    
                case 'leaderboard':
                    document.getElementById('content-title').textContent = 'üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥';
                    document.getElementById('content-text').innerHTML = `
                        <h3>–¢–æ–ø-5 –∏–≥—Ä–æ–∫–æ–≤</h3>
                        <ol style="padding-left: 20px;">
                            <li>–ò–≥—Ä–æ–∫1 - 1,250,000 ‚ö°</li>
                            <li>–ò–≥—Ä–æ–∫2 - 1,100,000 ‚ö°</li>
                            <li>–ò–≥—Ä–æ–∫3 - 900,000 ‚ö°</li>
                            <li>–ò–≥—Ä–æ–∫4 - 750,000 ‚ö°</li>
                            <li>–ò–≥—Ä–æ–∫5 - 500,000 ‚ö°</li>
                        </ol>
                        <p style="margin-top: 15px; color: #3498db;">
                            <strong>–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è:</strong> 15 –º–µ—Å—Ç–æ
                        </p>
                    `;
                    break;
                    
                case 'exchange':
                    document.getElementById('content-title').textContent = 'üí± –û–±–º–µ–Ω';
                    document.getElementById('content-text').innerHTML = `
                        <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
                            <h3>–ö—É—Ä—Å—ã –æ–±–º–µ–Ω–∞</h3>
                            <p>1000 ‚ö° = 1 Œì</p>
                            <p>10 Œì = 1 üíé</p>
                            <p>1 üíé = 12 Œì</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <p>–§—É–Ω–∫—Ü–∏—è –æ–±–º–µ–Ω–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!</p>
                        </div>
                    `;
                    break;
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
            const savedState = localStorage.getItem('zeroToHeroSave');
            if (savedState) {
                try {
                    const parsed = JSON.parse(savedState);
                    gameState = {
                        ...gameState,
                        ...parsed,
                        lastUpdate: Date.now() // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                    };
                } catch (e) {
                    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", e);
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å–∞ –∏–∑ Telegram
            if (tg.initDataUnsafe?.user?.is_premium) {
                gameState.hasPremium = true;
            }
            
            updateBalance();
            showSection('city');
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(() => {
                calculateIncome();
                localStorage.setItem('zeroToHeroSave', JSON.stringify(gameState));
            }, 30000);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            setInterval(() => {
                calculateIncome();
                updateBalance();
            }, 1000);
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
  </html>
