<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Empire</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        :root {
            --primary: #0088cc;
            --energy: #f39c12;
            --gamma: #3498db;
            --ton: #9b59b6;
            --premium: #f1c40f;
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            padding: 80px 15px 100px;
            min-height: 100vh;
        }
        
        /* –ö—Ä—É–≥–ª—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞ –ø–∞–Ω–µ–ª–∏ */
        .round-nav-bar {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 1000;
        }
        
        .round-nav-container {
            display: flex;
            background: white;
            border-radius: 50px;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .round-nav-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            background: #f0f0f0;
        }
        
        .round-nav-button.active {
            background: var(--primary);
            color: white;
            transform: translateY(-10px) scale(1.1);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        /* –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        /* –ú–∞–≥–∞–∑–∏–Ω - –∑–¥–∞–Ω–∏—è */
        .building {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .building:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .building-icon {
            font-size: 30px;
            margin-right: 15px;
            width: 50px;
            text-align: center;
        }
        
        .building-info {
            flex: 1;
        }
        
        .building-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .building-price {
            color: var(--gamma);
            font-weight: bold;
        }
        
        .buy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .buy-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        /* –ë–∞–ª–∞–Ω—Å */
        .balance-container {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .balance-item {
            text-align: center;
        }
        
        .balance-value {
            font-weight: bold;
            font-size: 18px;
        }
        
        #energy { color: var(--energy); }
        #gamma { color: var(--gamma); }
        #ton { color: var(--ton); }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <!-- –ë–∞–ª–∞–Ω—Å -->
    <div class="balance-container">
        <div class="balance-item">
            <div>‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
            <div class="balance-value" id="energy">0</div>
        </div>
        <div class="balance-item">
            <div>Œì Gamma</div>
            <div class="balance-value" id="gamma">0</div>
        </div>
        <div class="balance-item">
            <div>üíé TON</div>
            <div class="balance-value" id="ton">0</div>
        </div>
    </div>
    
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
    <div class="container">
        <!-- –ò–≤–µ–Ω—Ç—ã -->
        <div id="events" class="content-section">
            <div class="card">
                <h2>üé≤ –ò–≤–µ–Ω—Ç—ã</h2>
                <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –∞–∫—Ü–∏–∏</p>
            </div>
        </div>
        
        <!-- –ú–∞–≥–∞–∑–∏–Ω -->
        <div id="shop" class="content-section">
            <div class="card">
                <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
                <p>–ü–æ–∫—É–ø–∞–π—Ç–µ –∑–¥–∞–Ω–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏</p>
                
                <div id="buildings-list">
                    <!-- –ó–¥–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <!-- –ì–æ—Ä–æ–¥ -->
        <div id="city" class="content-section">
            <div class="card">
                <h2>üèôÔ∏è –ì–æ—Ä–æ–¥</h2>
                <p>–í–∞—à–∏ –∑–¥–∞–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</p>
                <div id="city-buildings"></div>
            </div>
        </div>
        
        <!-- –õ–∏–¥–µ—Ä–±–æ—Ä–¥ -->
        <div id="leaderboard" class="content-section">
            <div class="card">
                <h2>üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥</h2>
                <p>–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</p>
            </div>
        </div>
        
        <!-- –û–±–º–µ–Ω–Ω–∏–∫ -->
        <div id="exchange" class="content-section">
            <div class="card">
                <h2>üí± –û–±–º–µ–Ω–Ω–∏–∫</h2>
                <p>–û–±–º–µ–Ω –≤–∞–ª—é—Ç</p>
            </div>
        </div>
    </div>
    
    <!-- –ö—Ä—É–≥–ª–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="round-nav-bar">
        <div class="round-nav-container">
            <div class="round-nav-button" onclick="showSection('events')">üé≤</div>
            <div class="round-nav-button" onclick="showSection('shop')">üõí</div>
            <div class="round-nav-button active" onclick="showSection('city')">üèôÔ∏è</div>
            <div class="round-nav-button" onclick="showSection('leaderboard')">üèÜ</div>
            <div class="round-nav-button" onclick="showSection('exchange')">üí±</div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const gameState = {
            balance: {
                energy: 1000,
                gamma: 500,
                ton: 10
            },
            buildings: {
                solar: 0,
                wind: 0,
                water: 0,
                nuclear: 0
            }
        };
        
        // –î–∞–Ω–Ω—ã–µ –æ –∑–¥–∞–Ω–∏—è—Ö
        const buildingsData = [
            {
                id: "solar",
                name: "–°–æ–ª–Ω–µ—á–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è",
                emoji: "‚òÄÔ∏è",
                price: 100,
                income: 10
            },
            {
                id: "wind",
                name: "–í–µ—Ç—Ä—è–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è",
                emoji: "üå¨Ô∏è",
                price: 300,
                income: 30
            },
            {
                id: "water",
                name: "–í–æ–¥–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è",
                emoji: "üåä",
                price: 700,
                income: 70
            },
            {
                id: "nuclear",
                name: "–ê—Ç–æ–º–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è",
                emoji: "‚ò¢Ô∏è",
                price: 1500,
                income: 150,
                premium: true
            }
        ];
        
        // –û–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å
        function updateBalance() {
            document.getElementById('energy').textContent = gameState.balance.energy;
            document.getElementById('gamma').textContent = gameState.balance.gamma;
            document.getElementById('ton').textContent = gameState.balance.ton;
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª
        function showSection(sectionId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª
            document.getElementById(sectionId).style.display = 'block';
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.round-nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ù–∞–π—Ç–∏ –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É
            const buttons = document.querySelectorAll('.round-nav-button');
            const sectionOrder = ['events', 'shop', 'city', 'leaderboard', 'exchange'];
            const buttonIndex = sectionOrder.indexOf(sectionId);
            
            if (buttonIndex >= 0 && buttons[buttonIndex]) {
                buttons[buttonIndex].classList.add('active');
            }
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö
            window.scrollTo(0, 0);
        }
        
        // –ö—É–ø–∏—Ç—å –∑–¥–∞–Ω–∏–µ
        function buyBuilding(buildingId) {
            const building = buildingsData.find(b => b.id === buildingId);
            
            if (!building) return;
            
            if (gameState.balance.gamma >= building.price) {
                gameState.balance.gamma -= building.price;
                gameState.buildings[buildingId]++;
                updateBalance();
                updateShop();
                updateCity();
                
                alert(`–í—ã –∫—É–ø–∏–ª–∏ ${building.name}!`);
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Gamma Coin!");
            }
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω
        function updateShop() {
            const shopList = document.getElementById('buildings-list');
            shopList.innerHTML = '';
            
            buildingsData.forEach(building => {
                const canAfford = gameState.balance.gamma >= building.price;
                const isPremiumLocked = building.premium && !gameState.premium;
                
                shopList.innerHTML += `
                    <div class="building">
                        <div class="building-icon">${building.emoji}</div>
                        <div class="building-info">
                            <div class="building-name">${building.name}</div>
                            <div>–î–æ—Ö–æ–¥: ${building.income} ‚ö°/—á–∞—Å</div>
                        </div>
                        <div>
                            <div class="building-price">${building.price} Œì</div>
                            <button class="buy-btn" 
                                    onclick="buyBuilding('${building.id}')"
                                    ${!canAfford || isPremiumLocked ? 'disabled' : ''}>
                                –ö—É–ø–∏—Ç—å
                            </button>
                        </div>
                    </div>
                `;
            });
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –≥–æ—Ä–æ–¥
        function updateCity() {
            const cityBuildings = document.getElementById('city-buildings');
            cityBuildings.innerHTML = '';
            
            let totalIncome = 0;
            
            for (const [id, count] of Object.entries(gameState.buildings)) {
                if (count > 0) {
                    const building = buildingsData.find(b => b.id === id);
                    const income = count * building.income;
                    totalIncome += income;
                    
                    cityBuildings.innerHTML += `
                        <div style="margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 5px;">
                            ${building.emoji} ${building.name}: ${count} —à—Ç.
                            <br><small>–î–æ—Ö–æ–¥: ${income} ‚ö°/—á–∞—Å</small>
                        </div>
                    `;
                }
            }
            
            if (cityBuildings.innerHTML === '') {
                cityBuildings.innerHTML = '<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–¥–∞–Ω–∏–π. –ö—É–ø–∏—Ç–µ –∏—Ö –≤ –º–∞–≥–∞–∑–∏–Ω–µ!</p>';
            } else {
                cityBuildings.innerHTML += `<p style="margin-top: 10px;"><strong>–û–±—â–∏–π –¥–æ—Ö–æ–¥:</strong> ${totalIncome} ‚ö°/—á–∞—Å</p>`;
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            updateBalance();
            updateShop();
            updateCity();
            showSection('city');
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(() => {
                localStorage.setItem('energyEmpireSave', JSON.stringify(gameState));
            }, 30000);
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
